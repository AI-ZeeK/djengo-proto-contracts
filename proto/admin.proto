syntax = "proto3";


package admin;


// üë§ Profile Service - handles user profiles and user management
service AdminService {
  // admin services
  rpc AdminRegister(AdminRegisterRequest) returns (AuthInitialResponse);
  rpc AdminLogin(LoginRequest) returns (AuthInitialResponse);
  rpc AdminLogout(LogoutRequest) returns (SendOtpResponse);
  rpc AdminSendOtp(SendOtpRequest) returns (SendOtpResponse);
  rpc AdminVerifyOtp(VerifyOtpRequest) returns (VerifyOtpResponse);
  rpc AdminRefreshToken(RefreshTokenRequest) returns (RefreshTokenResponse);
  rpc FetchAllAdmin(FetchAdminAccountRequest) returns (FetchAllAdminResponse);
  rpc FetchAdminAccount(FetchAdminAccountRequest) returns (FetchAdminAccountResponse);
  rpc ValidateAdminAccount(ValidateAdminAccountRequest) returns (FetchAdminAccountResponse);

  rpc GetUser(GetUserRequest) returns (UserResponse);

  // Analytics
  rpc OverviewAnalytics(EmptyRequest) returns (OverviewAnalyticsResponse);
}

message FetchAllAdminResponse {
  repeated User users = 1;
  bool success = 2 ;
  string message = 3;
}
  
message FetchAdminAccountRequest {
  string user_id = 1;
}
message ValidateAdminAccountRequest {
  string token = 1;
}

message FetchAdminAccountResponse {
  User user = 1;
  bool success = 2;
  string message = 3;
}






// üìù REQUEST MESSAGES

message EmptyRequest {}



message Role {
  string role_id = 1;
  string role_name = 2;
  bool is_active = 3;
}


message VerifyOtpResponse {
  bool success = 1;
  optional string error = 2;
  optional string message = 3;
  optional string access_token = 4;
  optional User user = 5;
}

message LoginRequest {
  string email = 1;
  string password = 2;
}

message SendOtpRequest {
  string token = 1;
  SendOtpType type = 2;
}

message VerifyOtpRequest {
  string token = 1;
  string otp = 2;
  SendOtpType type = 3;
}

message SendOtpResponse {
  bool success = 1;
  optional string error = 2;
  optional string message = 3;
}

message RefreshTokenResponse {
  bool success = 1;
  User user = 2;
  string access_token = 3;
}




message AuthInitialResponse {
  bool success = 1;
  optional string error = 2;
  optional string message = 3;
  optional string auth_token = 4;
}
  
message AdminRegisterRequest {
  string email = 1;
  string password = 2;
  string platform_ref = 3;

}

message RegisterRequest {
  string email = 1;
  string password = 2;
  string phone_number = 3;
  string company_ref = 4;
  string role_name = 5;
}


enum ROLES_ENUM {
  CLIENT = 0;
  BUSINESS_USER = 1;
  STAFF = 2;
}

message LogoutRequest {
  string user_id = 1;
}

message RefreshTokenRequest {
  string token = 1;
}



message GetUserRequest {
  string user_id = 1;
}

message GetUserByEmailRequest {
  string email = 1;
}


message UserResponse {
  bool success = 1;
  optional string error = 2;
  optional User user = 3;
}

message GetUserByEmailResponse {
  bool success = 1;
  optional string error = 2;
  optional string message = 3;
  optional User user = 4;
}



message GetUserContactsResponse {
  bool success = 1;
  optional string error = 2;
  repeated Contact contacts = 3;
  int32 total_count = 4;
}



// üèóÔ∏è DATA MODELS

message User {
  string user_id = 1;
  string email = 2;
  optional string username = 3;
  optional string first_name = 4;
  optional string last_name = 5;
  optional string phone_number = 6;
  optional string avatar_url = 7;
  optional string last_seen = 8;
  string created_at = 9;
  string updated_at = 10;
  bool email_verified = 11;
  optional Address address = 12;
}

message Contact {
  string user_id = 1;
  string email = 2;
  optional string username = 3;
  optional string first_name = 4;
  optional string last_name = 5;
  optional string avatar_url = 6;
  optional string last_seen = 7;
  bool email_verified = 8;
}

message Organization {
  string organization_id = 1;
  string name = 2;
  string phone_number = 3;
  string email = 4;
  string registration_number = 5;
  string registration_date = 6;
  string creator_id = 7;
  string created_at = 8;
  string updated_at = 9;
  optional string deleted_at = 10;
}

message Address {
  optional string address_id = 1;
  optional string street = 2;
  optional string building = 3;
  optional string apartment = 4;
  optional string district = 5;
  optional string city = 6;
  optional string state = 7;
  optional string postal_code = 8;
  optional string country = 9;
  optional string landmark = 10;
  optional string direction_url = 11;
  optional double latitude = 12;
  optional double longitude = 13;
}

message UserRole {
  string user_role_id = 1;
  string role_name = 2;
  bool is_active = 3;
}



enum SendOtpType {
  REGISTRATION = 0;
  SIGNIN = 1;
  ADMIN_REGISTRATION = 2;
  ADMIN_SIGNIN = 3;
  FORGOT_PASSWORD = 4;
}

// Analytics Messages
message TotalOrganizationsData {
  int32 count = 1;
}

message OrganizationWithCounts {
  string organization_id = 1;
  string name = 2;
  string phone_number = 3;
  string email = 4;
  string registration_number = 5;
  string registration_date = 6;
  bool is_active = 7;
  bool is_multi_company = 8;
  string creator_id = 9;
  string created_at = 10;
  string updated_at = 11;
  optional string deleted_at = 12;
  int32 staff_count = 13;
  int32 business_user_count = 14;
  int32 access_control_count = 15;
  int32 companies_count = 16;
}

message TopPerformingOrganizationsData {
  repeated OrganizationWithCounts top_organizations = 1;
}

message YAxis {
  int32 max = 1;
  repeated int32 sections = 2;
  string label = 3;
}

message XAxis {
  repeated string sections = 1;
  string label = 2;
}

message DailyActiveUsersData {
  string day = 1;
  string date = 2;
  int32 active_users = 3;
  bool is_today = 4;
}

message PeakDay {
  string day = 1;
  string date = 2;
  int32 active_users = 3;
  bool is_today = 4;
}

message DailyActiveUsersSummary {
  int32 total_users = 1;
  double avg_daily_active = 2;
  PeakDay peak_day = 3;
}

message DailyActiveUsersAnalytics {
  YAxis y_axis = 1;
  XAxis x_axis = 2;
  repeated DailyActiveUsersData data = 3;
  DailyActiveUsersSummary summary = 4;
}

message ActiveUsersCountData {
  int32 count = 1;
  double percentage = 2;
  string trend = 3;
}

message OverviewAnalyticsResponse {
  TotalOrganizationsData total_organizations = 1;
  TopPerformingOrganizationsData top_performing_organizations = 2;
  DailyActiveUsersAnalytics daily_active_users = 3;
  ActiveUsersCountData active_users_count = 4;
}
