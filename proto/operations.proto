syntax = "proto3";

option csharp_namespace = "Operations.Grpc";

package operations;

// The greeting service definition.
service OperationService {
  // Sends a greeting
  rpc SayHello (HelloRequest) returns (HelloReply);
  rpc HealthCheck(HealthCheckRequest) returns (HealthCheckResponse);

  // Company Services Management
  rpc CreateCompanyServices(CreateCompanyServicesRequest) returns (CreateCompanyServicesResponse);
  rpc CreateServiceBranch(CreateServiceBranchRequest) returns (CreateServiceBranchResponse);
  rpc UpsertBusinessHours(UpsertBusinessHoursRequest) returns (UpsertBusinessHoursResponse);


  // Service Types Management
  rpc GetServiceTypes(EmptyRequest) returns (CreateServiceTypeResponse);
  rpc CreateServiceType(CreateServiceTypeRequest) returns (CreateServiceTypeResponse);
  rpc UpdateServiceType(UpdateServiceTypeRequest) returns (CreateServiceTypeResponse);
}
message EmptyRequest {}


message CreateServiceTypeRequest {
  string name = 1;
// e.g., RESTAURANT, HOTEL, SPA, GYM, etc.
}

message CreateServiceTypeResponse {
  bool success = 1;
  string message = 2;
  optional ServiceType data = 3;
}

message UpdateServiceTypeRequest {
  string service_type_id = 1;
  string name = 2;
}

// The request message containing the user's name.
message HelloRequest {
  string name = 1;
}

// The response message containing the greetings.
message HelloReply {
  string message = 1;
}

message HealthCheckRequest {}
message HealthCheckResponse {
  string status = 1;
}

// --- Company Services Creation ---
message CreateCompanyServicesRequest {
  string company_id = 1;
  string branch_id = 2;
  repeated BusinessTypeRequest business_types = 3;
}

message CreateCompanyServicesResponse {
  string message = 1;
  bool success = 2;
}

message BusinessTypeRequest {
  string type = 1; // RESTAURANT, HOTEL, SPA, GYM, etc.
  string description = 2;
  string check_in_time = 3;
  string check_out_time = 4;
  repeated BusinessHourRequest business_hours = 5;
  repeated RestaurantTableTypeRequest restaurant_table_types = 6;
  repeated HotelRoomTypeRequest hotel_room_types = 7;
}

message BusinessHourRequest {
  string day_of_week = 1; // MONDAY, TUESDAY, etc.
  string start_time = 2;
  string end_time = 3;
}

message RestaurantTableTypeRequest {
  string name = 1;
  int32 seating_capacity = 2;
  string description = 3;
  repeated RestaurantTableRequest tables = 4;
}

message RestaurantTableRequest {
  string name = 1;
  int32 location_id = 2;
  string description = 3;
}

message HotelRoomTypeRequest {
  string name = 1;
  string description = 2;
  double price_per_night = 3;
  int32 max_occupancy = 4;
  int32 bed_size_id = 5;
  repeated HotelRoomRequest hotel_rooms = 6;
}

message HotelRoomRequest {
  string ref = 1;
  int32 location_id = 2;
  string description = 3;
  bool is_active = 4;
}

// --- Service Branch Creation ---
message CreateServiceBranchRequest {
  string branch_id = 1;
  string service_id = 2;
  string service_type_name = 3;
  string description = 4;
  string check_in_time = 5;
  string check_out_time = 6;
}
message CreateServiceBranchResponse {
  string service_branch_id = 1;
}

// --- Business Hours Upsert ---
message UpsertBusinessHoursRequest {
  string service_branch_id = 1;
  string business_day = 2;
  string start_time = 3;
  string end_time = 4;
}
message UpsertBusinessHoursResponse {
  string business_hours_id = 1;
}

message ServiceType {
  string service_type_id = 1;
  string name = 2;
}