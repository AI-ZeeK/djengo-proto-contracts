syntax = "proto3";

option csharp_namespace = "Operations.Grpc";

package operations;

// The greeting service definition.
service OperationService {
  // Sends a greeting
  rpc SayHello (HelloRequest) returns (HelloReply);
  rpc HealthCheck(HealthCheckRequest) returns (HealthCheckResponse);

  // Company Services Management
  rpc CreateCompanyServices(CreateCompanyServicesRequest) returns (CreateCompanyServicesResponse);
  rpc UpdateCompanyServiceStatus(UpdateCompanyServiceStatusRequest) returns (UpdateCompanyServiceResponse);
  rpc UpdateCompanyService(UpdateCompanyServiceRequest) returns (UpdateCompanyServiceResponse);
  rpc DeleteCompanyService(DeleteCompanyServiceRequest) returns (DeleteCompanyServiceResponse);
  rpc GetCompanyServices(GetCompanyServicesRequest) returns (GetCompanyServicesResponse);
  rpc SearchCompanyServices(SearchCompanyServicesRequest) returns (GetCompanyServicesResponse);
  rpc CreateServiceBranch(CreateServiceBranchRequest) returns (CreateServiceBranchResponse);
  rpc UpsertBusinessHours(UpsertBusinessHoursRequest) returns (UpsertBusinessHoursResponse);

    // Countries Management
    
    // Service Types Management
  rpc GetServiceTypes(EmptyRequest) returns (GetServiceTypesResponse);
  rpc CreateServiceType(CreateServiceTypeRequest) returns (CreateServiceTypeResponse);
  rpc UpdateServiceType(UpdateServiceTypeRequest) returns (CreateServiceTypeResponse);

    // Business Types Management
  rpc GetAdminBusinessTypes(EmptyRequest) returns (GetBusinessTypesResponse);
  rpc GetBusinessTypes(EmptyRequest) returns (GetBusinessTypesResponse);
  rpc CreateBusinessType(CreateBusinessTypeRequest) returns (CreateBusinessTypeResponse);
  rpc UpdateBusinessTypeActiveStatus(UpdateBusinessTypeActiveStatusRequest) returns (UpdateBusinessTypeActiveStatusResponse);


  rpc FetchServiceTypes(EmptyRequest) returns (GetServiceTypesResponse);
  rpc GetTableLocations(OrganizationIdRequest) returns (GetTableLocationsResponse);
  rpc GetBedSizes(OrganizationIdRequest) returns (GetBedSizesResponse);
  rpc GetRoomLocations(OrganizationIdRequest) returns (GetRoomLocationsResponse);


    //Delete Utilities
  rpc DeleteTableLocation(DeleteTableLocationRequest) returns (UtilitiesResponse);
  rpc DeleteBedSize(DeleteBedSizeRequest) returns (UtilitiesResponse);
  rpc DeleteRoomLocation(DeleteRoomLocationRequest) returns (UtilitiesResponse);

  // CREATE UTILITIES
  rpc CreateTableLocation(CreateTableLocationRequest) returns (UtilitiesResponse);
  rpc CreateBedSize(CreateBedSizeRequest) returns (UtilitiesResponse);
  rpc CreateRoomLocation(CreateRoomLocationRequest) returns (UtilitiesResponse);
}
message EmptyRequest {}


message CreateServiceTypeRequest {
  string name = 1;
// e.g., RESTAURANT, HOTEL, SPA, GYM, etc.
}

message CreateServiceTypeResponse {
  bool success = 1;
  string message = 2;
  optional ServiceType data = 3;
}

message UpdateServiceTypeRequest {
  string service_type_id = 1;
  string name = 2;
}

// The request message containing the user's name.
message HelloRequest {
  string name = 1;
}

// The response message containing the greetings.
message HelloReply {
  string message = 1;
}

message HealthCheckRequest {}
message HealthCheckResponse {
  string status = 1;
}



// --- Company Services Creation ---
message CreateCompanyServicesRequest {
  string company_id = 1;
  int32 business_type_id = 2;
  string name = 3;
  string base_price = 4;
  string description = 5;
  bool is_active = 6;
  optional string branch_id = 7;
  repeated BusinessTypeRequest business_types = 8;
}

message CreateCompanyServicesResponse {
  string message = 1;
  bool success = 2;
  optional CompanyServiceData data = 3;
}

// --- Update Company Service ---
message UpdateCompanyServiceStatusRequest {
  string company_service_id = 1;
  optional bool is_active = 2;
}
message UpdateCompanyServiceRequest {
  string company_service_id = 1;
  optional int32 business_type_id = 2;
  optional string base_price = 3;
  optional string description = 4;
  optional bool is_active = 5;
}

message UpdateCompanyServiceResponse {
  bool success = 1;
  string message = 2;
  optional CompanyServiceData data = 3;
}

// --- Delete Company Service (Soft Delete) ---
message DeleteCompanyServiceRequest {
  string company_service_id = 1;
}

message DeleteCompanyServiceResponse {
  bool success = 1;
  string message = 2;
}

// --- Get Company Services ---
message GetCompanyServicesRequest {
  string company_id = 1;
  optional string branch_id = 2;
  optional bool include_inactive = 3;
}

// --- Search Company Services with Filters ---
message SearchCompanyServicesRequest {
  optional string company_id = 1; // Optional - filter by company, if not provided returns all companies
  optional string service_name = 2; // Filter by service/business type name
  optional int32 business_type_id = 3; // Filter by business type ID
  optional bool include_inactive = 4; // Include inactive services
  optional string branch_id = 5; // Filter by branch
  optional bool include_deleted = 6; // Include soft-deleted services (default: false)
}

message GetCompanyServicesResponse {
  bool success = 1;
  optional string error = 2;
    string message = 3;
  repeated CompanyServiceData company_services = 4;
}

message CompanyServiceData {
  string company_service_id = 1;
  string company_id = 2;
  int32 business_type_id = 3;
  int32 service_type_id = 4;
  string base_price = 5;
  string description = 6;
  bool is_active = 7;
  optional string branch_id = 8;
  string created_at = 9;
  string updated_at = 10;
  optional string business_type_name = 11;
  optional string service_type_name = 12;
}

message BusinessTypeRequest {
  string type = 1; // RESTAURANT, HOTEL, SPA, GYM, etc.
  string description = 2;
  string check_in_time = 3;
  string check_out_time = 4;
  repeated BusinessHourRequest business_hours = 5;
  repeated RestaurantTableTypeRequest restaurant_table_types = 6;
  repeated HotelRoomTypeRequest hotel_room_types = 7;
}

message BusinessHourRequest {
  string day_of_week = 1; // MONDAY, TUESDAY, etc.
  string start_time = 2;
  string end_time = 3;
}

message RestaurantTableTypeRequest {
  string name = 1;
  int32 seating_capacity = 2;
  string description = 3;
  repeated RestaurantTableRequest tables = 4;
}

message RestaurantTableRequest {
  string name = 1;
  int32 location_id = 2;
  string description = 3;
}

message OrganizationIdRequest {
  string organization_id = 1;
}

message HotelRoomTypeRequest {
  string name = 1;
  string description = 2;
  double price_per_night = 3;
  int32 max_occupancy = 4;
  int32 bed_size_id = 5;
  repeated HotelRoomRequest hotel_rooms = 6;
}

message HotelRoomRequest {
  string ref = 1;
  int32 location_id = 2;
  string description = 3;
  bool is_active = 4;
}

// --- Service Branch Creation ---
message CreateServiceBranchRequest {
  string branch_id = 1;
  string service_id = 2;
  string service_type_name = 3;
  string description = 4;
  string check_in_time = 5;
  string check_out_time = 6;
}

message CreateServiceBranchResponse {
  string service_branch_id = 1;
}

message CreateTableLocationRequest {
  string name = 1;
  string organization_id = 2;
  string creator_id = 3;
}

message CreateBedSizeRequest {
  string name = 1;
  string organization_id = 2;
  string creator_id = 3;
}

message CreateRoomLocationRequest {
  string name = 1;
  string organization_id = 2;
  string creator_id = 3;
}

// --- Business Hours Upsert ---
message UpsertBusinessHoursRequest {
  string service_branch_id = 1;
  string business_day = 2;
  string start_time = 3;
  string end_time = 4;
}

message UpsertBusinessHoursResponse {
  string business_hours_id = 1;
}

message ServiceType {
  string service_type_id = 1;
  string name = 2;
}

message GetServiceTypesResponse {
  bool success = 1;
  optional string error = 2;
  repeated ServiceType service_types = 3;
}

// Business Types Messages
message CreateBusinessTypeRequest {
  string name = 1;
  string description = 2;
  bool is_active = 3;
}

message CreateBusinessTypeResponse {
  bool success = 1;
  string message = 2;
  optional BusinessTypeData data = 3;
}

message UpdateBusinessTypeActiveStatusRequest {
  int32 business_type_id = 1;
}

message UpdateBusinessTypeActiveStatusResponse {
  bool success = 1;
  string message = 2;
  optional BusinessTypeData data = 3;
}

message GetBusinessTypesResponse {
  bool success = 1;
  optional string error = 2;
  repeated BusinessTypeData business_types = 3;
}

message BusinessTypeData {
  int32 business_type_id = 1;
  string name = 2;
  string description = 3;
  bool is_active = 4;
  string created_at = 5;
  string updated_at = 6;
}

message GetBedSizesResponse {
  bool success = 1;
  optional string error = 2;
  repeated BedSize bed_sizes = 3;
}



message DeleteTableLocationRequest {
  int32 table_location_id = 1;
} 

message DeleteBedSizeRequest {
  int32 bed_size_id = 1;
}

message DeleteRoomLocationRequest {
  int32 room_location_id = 1;
}

message GetTableLocationsResponse {
  bool success = 1;
  optional string error = 2;
  repeated TableLocation table_locations = 3;
}

message GetRoomLocationsResponse {
  bool success = 1;
  optional string error = 2;
  repeated RoomLocation room_locations = 3;
}

message UtilitiesResponse {
  bool success = 1;
  optional string error = 2;
  string message = 3;
}

message TableLocation {
  int32 table_location_id = 1;
  string name = 2;
  string description = 3;
  bool is_global = 4;
  bool is_active = 5;
}

message RoomLocation {
  int32 room_location_id = 1;
  string name = 2;
  string description = 3;
  bool is_global = 4;
  bool is_active = 5;
}

message HotelRoomType {
  string name = 1;
  optional string description = 2;
  int32 price_per_night = 3;
  int32 max_occupancy = 4;
  int32 bed_size_id = 5;
  repeated HotelRoom hotel_rooms = 6;
}

message HotelRoom {
  string ref = 1;
  optional string description = 2;
  int32 location_id = 3;
  optional bool is_active = 4;

}



message BedSize {
  int32 bed_size_id = 1;
  string name = 2;
  string description = 3;
  bool is_global = 4;
  bool is_active = 5;
}


message BusinessType {
  optional string type = 1;
  optional string description = 2;
  optional string check_in_time = 3;
  optional string check_out_time = 4;
  repeated BusinessHours business_hours = 5;
  repeated RestaurantTableType restaurant_table_types = 6;
  repeated HotelRoomType hotel_room_types = 7;
}

message BusinessHours {
  string day_of_week = 1;
  string start_time = 2;
  string end_time = 3;
  bool is_active = 4;
}

message RestaurantTableType {
  optional string name = 1;
  optional string description = 2;
  optional int32 seating_capacity = 3;
  repeated RestaurantTable tables = 4;
}

message RestaurantTable {
  optional string name = 1;
  optional string description = 2;
  optional int32 location_id = 3;
}